#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"

echo "🔍 Running backend tests..."
cd backend && npm test
BACKEND_STATUS=$?

echo "🔍 Running frontend tests..."
cd ../frontend && npm test
FRONTEND_STATUS=$?

# Fail the commit if either fails
if [[ $BACKEND_STATUS -ne 0 || $FRONTEND_STATUS -ne 0 ]]; then
  echo "Either backend or frontend is not healthy"
  exit 1
fi

echo "✅ All tests passed!"